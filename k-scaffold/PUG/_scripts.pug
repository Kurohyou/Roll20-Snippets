//- Functions
//- @pugdoc
  name: script
  description: Creates a generic [Roll20 script block](https://wiki.roll20.net/Building_Character_Sheets#JavaScript_2) for use with the sheetworker system.
  arguments:
  attributes:
  example: |
    include _htmlelements.pug
    +script
mixin script
  script(type='text/worker')
    block
//-End Mixin

//- @pugdoc
  name: kscript
  description: Similar to {@link script}, but includes the K-scaffold\'s javascript function library.
  arguments:
  attributes:
  example: |
    include _htmlelements.pug
    +kscript
mixin kscript
  +script
    |const k = (function(){
    |const kFuncs = {};
    //- The below declarations import variables from the pug file and mixins into the sheetworker code
    - const propArray = ['cascades','repeatingSectionDetails'];
    each prop in propArray
      |
      |const !{prop} = !{JSON.stringify(varObjects[prop])};
      |
      |kFuncs.!{prop} = !{prop};
      - delete varObjects[prop];
    |
    |
    include ../JS/kvariables.js
    include ../JS/utility.js
    include ../JS/attribute_proxy.js
    include ../JS/accessSheet.js
    include ../JS/parse_cascade.js
    include ../JS/sheetworker_aliases.js
    include ../JS/listeners.js
    include ../JS/tabs.js
    |
    |return kFuncs;
    |}());
    |
    each content,prop in varObjects
      |
      if typeof content === 'object'
        |const !{prop} = !{JSON.stringify(content)};
      else
        |let !{prop} = !{content};
      |
    |
    block
//- End Mixin